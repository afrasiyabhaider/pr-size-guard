# PR Size Guard v1.1 - Release Plan

**Target Release:** 2-3 weeks after v1.0 approval  
**Focus:** Performance, Reliability, User Feedback

---

## üéØ Goals

1. Fix badge loading delay issues
2. Improve GitHub SPA navigation handling
3. Add user-requested features
4. Better error handling and edge cases

---

## üêõ Bug Fixes (Priority: HIGH)

### 1. Badge Loading Delay
**Issue:** Badge takes too long to appear on some PR pages

**Tasks:**
- [ ] Investigate GitHub's lazy loading behavior
- [ ] Use `MutationObserver` on specific containers (not body)
- [ ] Add targeted observation for `.diffstat` element
- [ ] Implement smarter retry with exponential backoff
- [ ] Test on various PR sizes (small, large, 1000+ files)

### 2. SPA Navigation Edge Cases
**Issue:** Badge sometimes doesn't update when navigating between PRs

**Tasks:**
- [ ] Add `turbo:before-render` event listener
- [ ] Track navigation with `navigation` API (if available)
- [ ] Debounce multiple rapid navigations
- [ ] Clear badge state on navigation start

### 3. GitHub DOM Changes
**Issue:** GitHub updates their DOM structure periodically

**Tasks:**
- [ ] Add more fallback selectors
- [ ] Implement selector health check
- [ ] Log selector failures (debug mode only)
- [ ] Create automated selector tests

---

## ‚ú® New Features (Priority: MEDIUM)

### 1. PR List Badge (Popular Request)
**Description:** Show size indicators on `/pulls` list page

**Tasks:**
- [ ] Detect `/pulls` page URL pattern
- [ ] Extract stats from PR list items
- [ ] Design compact badge for list view
- [ ] Handle pagination/infinite scroll
- [ ] Add setting to enable/disable

**Estimated Effort:** 3-4 days

### 2. Custom Badge Colors
**Description:** Let users customize badge colors

**Tasks:**
- [ ] Add color picker to popup settings
- [ ] Store custom colors in chrome.storage
- [ ] Apply CSS variables for colors
- [ ] Add reset to defaults option

**Estimated Effort:** 1-2 days

### 3. Badge Position Options
**Description:** Allow users to choose badge placement

**Options:**
- After PR title (current)
- Before PR title
- In the PR tab bar
- Floating corner badge

**Tasks:**
- [ ] Add position dropdown in settings
- [ ] Implement each position option
- [ ] Handle responsive layouts

**Estimated Effort:** 2 days

### 4. Keyboard Shortcut
**Description:** Quick toggle extension on/off

**Tasks:**
- [ ] Register keyboard shortcut in manifest
- [ ] Add commands API
- [ ] Show toast notification on toggle
- [ ] Add to popup settings

**Estimated Effort:** 0.5 days

---

## üîß Technical Improvements (Priority: MEDIUM)

### 1. Code Quality
- [ ] Add JSDoc comments to all functions
- [ ] Create TypeScript definitions (for IDE support)
- [ ] Implement error boundary pattern
- [ ] Add source maps for debugging

### 2. Testing
- [ ] Create test HTML fixtures for GitHub DOM
- [ ] Add unit tests for classification logic
- [ ] Add integration tests with Puppeteer
- [ ] Test on GitHub Enterprise (if possible)

### 3. Build System
- [ ] Add build script for production
- [ ] Minify JS/CSS for production
- [ ] Add version bumping script
- [ ] Automate ZIP creation

### 4. Monitoring (Optional)
- [ ] Add opt-in anonymous usage stats
- [ ] Track selector failures
- [ ] Monitor extension health
- [ ] Create simple dashboard

---

## üìä Performance Targets

| Metric | v1.0 | v1.1 Target |
|--------|------|-------------|
| Badge appear time | Variable | < 500ms |
| Memory usage | Unknown | < 5MB |
| CPU on idle | Unknown | 0% |
| Script size | ~3KB | < 5KB |

---

## üóìÔ∏è Timeline

### Week 1: Bug Fixes
- Day 1-2: Badge loading delay investigation
- Day 3-4: Implement MutationObserver fix
- Day 5: SPA navigation improvements
- Day 6-7: Testing & QA

### Week 2: Features
- Day 1-2: PR List Badge feature
- Day 3: Custom colors feature
- Day 4: Badge position options
- Day 5: Keyboard shortcut
- Day 6-7: Integration testing

### Week 3: Polish & Release
- Day 1-2: Code quality improvements
- Day 3: Documentation updates
- Day 4: Chrome Web Store assets update
- Day 5: Submission & monitoring

---

## üìù Changelog Preview (v1.1)

```markdown
## [1.1.0] - TBD

### Added
- PR size indicators on Pull Requests list page
- Custom badge color settings
- Badge position options
- Keyboard shortcut to toggle extension

### Fixed
- Badge loading delay on slow connections
- Navigation detection on GitHub SPA transitions
- Fallback selectors for GitHub DOM changes

### Improved
- Reduced memory footprint
- Faster badge injection
- Better error handling
```

---

## üì£ User Feedback Channels

After v1.0 launch, collect feedback from:

1. **Chrome Web Store Reviews**
   - Monitor daily for first 2 weeks
   - Respond to all reviews

2. **GitHub Issues**
   - Create issue templates
   - Label: bug, feature-request, question

3. **Social Media**
   - Twitter/X mentions
   - Reddit (r/programming, r/webdev)
   - Dev.to comments

---

## üöÄ Post-v1.1 Ideas (v1.2+)

| Feature | Priority | Effort |
|---------|----------|--------|
| GitLab support | Low | High |
| Bitbucket support | Low | High |
| Team thresholds (shared config) | Medium | Medium |
| PR complexity score (beyond size) | Low | High |
| Browser notification for critical PRs | Low | Medium |
| Dark mode improvements | Medium | Low |
| Localization (i18n) | Low | Medium |

---

## ‚úÖ Definition of Done (v1.1)

- [ ] All bug fixes verified
- [ ] New features tested on 10+ PRs
- [ ] No console errors in production
- [ ] Performance targets met
- [ ] Documentation updated
- [ ] Screenshots updated (if UI changed)
- [ ] Chrome Web Store listing updated
- [ ] Version bumped to 1.1.0
- [ ] CHANGELOG.md updated
- [ ] Release notes written

---

**Created:** January 3, 2026  
**Author:** Afrasiyab Haider
